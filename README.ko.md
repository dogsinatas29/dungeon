# 던전 크롤 (Dungeon Crawl)

[English](README.md) | **한국어**

파이썬 기반의 클래식 터미널 로그라이크 던전 크롤러 게임입니다. Entity Component System (ECS) 아키텍처를 사용하며 디아블로 1에서 영감을 받았습니다.

**참고**: 이 프로젝트는 Gemini를 페어 프로그래밍 도우미로 사용하여 개발되었습니다.

## 주요 기능

### 핵심 게임플레이
- **실시간 전투 시스템** - 턴 기반 메커니즘
- **절차적 생성 던전** - 다양한 층 타입
- **영구 사망** - 진정한 로그라이크 경험
- **캐릭터 성장** - 스킬 사용에 따른 동적 직업 시스템

### 전투 & 스킬
- **18개 디아블로 1 스펠** (4개 티어):
  - 1티어: 파이어볼트, 차지드 볼트, 치유, 홀리 볼트, 인페르노
  - 2티어: 파이어볼, 라이트닝, 석화 저주, 플래시, 페이징
  - 3티어: 체인 라이트닝, 플레임 웨이브, 가디언, 텔레포트
  - 4티어: 마나 실드, 노바, 골렘, 아포칼립스
- **스킬북 시스템** - 지수 레벨링 (3^n 진행: 1→3→9→27권)
- **속성 시스템** - 가위바위보 메커니즘 (물 > 불 > 나무 > 흙 > 물)
- **특수 데미지 타입** - 독, 언데드 보너스(둔기), 원거리 공격

### 아이템 & 장비
- **99개 이상의 기본 아이템**:
  - 30개 무기 (검, 도끼, 둔기, 활, 지팡이)
  - 26개 방어구 (투구, 방패, 갑옷)
  - 2개 액세서리 (반지, 목걸이)
  - 18개 스킬북
  - 다양한 소비 아이템 및 스크롤

### 디아블로 1 스타일 시스템
- **마법 아이템 시스템** - 접두사/접미사 조합:
  - 22개 접두사 (날카로운, 흑요석, 용의 등)
  - 17개 접미사 (황도십이궁의, 천상의 등)
  - 11개 액세서리 전용 접두사 (비취, 루비, 사파이어 등)
  - 2개 액세서리 전용 접미사 (달의, 재생의)
- **내구도 시스템** - 전투 중 장비 마모
- **강화 시스템**:
  - 무기/방어구용 오일 강화
  - 신전 강화 (0 ~ +10) - 성공/실패 메커니즘
- **신전 시스템** - 2층마다 등장, 복구 또는 강화 옵션

### 고급 기능
- **스테미너 시스템** - 이동 및 스킬 사용 시 소모
- **자원 관리** - 식량, 물약, 인벤토리 제한
- **상점 시스템** - 아이템 구매/판매 및 수리
- **사운드 시스템** - 행동에 대한 오디오 피드백
- **더블 버퍼 UI** - ANSI 색상을 사용한 부드러운 터미널 렌더링
- **저장/불러오기** - 영구 게임 상태

## TODO 리스트

### 높은 우선순위
- [ ] **지팡이 전투 시스템** - 이중 모드 무기 메커니즘:
  - [ ] 물리 타격 공격 (근접, 내구도 소모, STR 기반 데미지)
  - [ ] 마법 시전 모드 (원거리, 충전 횟수 소모, 스펠 고유 데미지)
  - [ ] 지팡이에 랜덤 스펠 할당
  - [ ] 'S' 키로 스펠 모드 활성화 + 방향키로 시전
- [ ] **특수 스킬 효과** (12개 스킬 구현 필요):
  - [ ] 홀리 볼트 - 언데드 추가 데미지
  - [ ] 인페르노 - 지속 화염 벽
  - [ ] 석화 저주 - 석화 효과
  - [ ] 페이징 - 랜덤 텔레포트
  - [ ] 체인 라이트닝 - 연쇄 공격
  - [ ] 플레임 웨이브 - 화염 파동 공격
  - [ ] 가디언 - 터렛 소환
  - [ ] 텔레포트 - 방향 지정 텔레포트
  - [ ] 마나 실드 - 마나로 데미지 흡수
  - [ ] 노바 - 전방향 공격
  - [ ] 골렘 - 골렘 소환
  - [ ] 아포칼립스 - 화면 전체 공격

### 중간 우선순위
- [ ] **언어 선택 메뉴** - 시작 시 한글/영어 선택
- [ ] **동적 직업 시스템** - 최고 레벨 스킬에 따라 직업 자동 변경
- [ ] **플레이어 행동 쿨다운** - 입력 처리에서 쿨다운 강제
- [ ] **밸런스 조정** - 실시간 게임플레이에 맞춰 난이도 조정
- [ ] **UI 개선**:
  - [ ] 쿨다운 표시
  - [ ] 실시간 HP/MP 바 애니메이션
  - [ ] 몬스터 행동 예측 표시

### 낮은 우선순위
- [ ] **마을/안전 지대** - 쇼핑 및 휴식을 위한 안전 구역
- [ ] **퀘스트 시스템** - 목표 및 보상
- [ ] **보스 특수 패턴** - 고유한 보스 행동
- [ ] **추가 캐릭터 클래스** - 4개 이상으로 확장
- [ ] **멀티플레이어 지원** - 협동 게임플레이

## 요구 사항

```bash
sudo apt install python3-gi python3-gi-cairo python3-dbus gir1.2-gtk-3.0
pip install readchar
```

## 플레이 방법

```bash
python3 dungeon/Start.py
```

### 조작법
- **방향키**: 캐릭터 이동
- **스페이스**: 공격 모드 전환
- **I**: 인벤토리 열기
- **Q**: 게임 종료
- **1-9**: 퀵슬롯 사용

### 게임 메커니즘

#### 능력치
- **HP**: 생명력
- **MP**: 스킬 사용을 위한 마나
- **스테미너**: 이동(20타일 = 1 스테미너) 및 스킬 사용 시 소모
- **STR/DEX/MAG/VIT**: 전투 및 장비에 영향을 주는 핵심 능력치

#### 전투
- **공격 타입**: 근접, 원거리, 투사체, 범위
- **방어**: 방패와 갑옷이 데미지 감소
- **속성 우위**: 올바른 속성 조합으로 보너스 데미지
- **내구도 손실**: 공격자의 무기와 방어자의 갑옷에 타격당 10% 확률

#### 성장
- **동적 직업**: 가장 높은 레벨의 스킬에 따라 직업 변경
- **스킬 레벨링**: 여러 스킬북을 읽어 레벨업 (1→3→9→27권)
- **아이템 강화**: 오일이나 신전을 사용하여 장비 업그레이드
- **영구 능력치**: 엘릭서로 영구 능력치 증가

## 프로젝트 구조

```
dungeon/
├── Start.py              # 메인 진입점
├── dungeon/
│   ├── game.py          # 메인 게임 루프
│   ├── engine.py        # 게임 엔진 및 상태 관리
│   ├── ecs.py           # Entity Component System
│   ├── components.py    # ECS 컴포넌트
│   ├── systems.py       # ECS 시스템 (전투, 이동 등)
│   ├── player.py        # 플레이어 클래스
│   ├── dungeon_map.py   # 맵 생성
│   ├── ui.py            # 터미널 UI 렌더링
│   ├── data_manager.py  # 데이터 로딩
│   └── sound_system.py  # 오디오 시스템
├── data/
│   ├── items.csv        # 아이템 정의
│   ├── skills.csv       # 스킬 정의
│   ├── prefixes.json    # 마법 아이템 접두사
│   ├── suffixes.json    # 마법 아이템 접미사
│   └── monster_data.txt # 몬스터 정의
└── game_data/           # 저장 파일 (JSON)
```

## 개발

### 코딩 스타일
- PEP 8 표준 준수
- 자동 포맷팅은 `black` 사용

### 주요 디자인 패턴
- **ECS 아키텍처**: 데이터(컴포넌트)와 로직(시스템) 분리
- **이벤트 기반**: 게임 이벤트를 위한 이벤트 매니저
- **데이터 기반**: CSV/JSON 파일로 정의된 아이템, 스킬, 몬스터

## 라이선스

이 프로젝트는 교육 목적으로 오픈 소스입니다.

---

**Gemini AI를 페어 프로그래밍 도우미로 사용하여 개발됨**

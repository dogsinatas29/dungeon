# Gemini í”„ë¡œì íŠ¸: ë˜ì „ í¬ë¡¤ëŸ¬

ì´ í”„ë¡œì íŠ¸ëŠ” íŒŒì´ì¬ ê¸°ë°˜ì˜ í´ë˜ì‹ í„°ë¯¸ë„ ë¡œê·¸ë¼ì´í¬ ê²Œì„ì…ë‹ˆë‹¤. ê²Œì„ ë¡œì§ì€ `dungeon/` ë””ë ‰í† ë¦¬ ë‚´ì˜ ì—¬ëŸ¬ ëª¨ë“ˆë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©°, **ì»´í¬ë„ŒíŠ¸-ì—”í‹°í‹°-ì‹œìŠ¤í…œ(ECS) íŒ¨í„´**ì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì–´ í™•ì¥ì„±, ìœ ì§€ë³´ìˆ˜ì„±, ì¬ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.

## ğŸ¯ ìµœì¢… ëª©í‘œ
í„°ë¯¸ë„ ê¸°ë°˜ì˜ ë¡œê·¸ë¼ì´í¬ ê²Œì„ ì—”ì§„ì„ ECS íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ì™„ì„±í•˜ì—¬, ê·œì¹™ê³¼ ë°ì´í„°ë¥¼ ì‹¤í–‰ ë¡œì§ê³¼ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.

## ğŸ® Roguelike Game Engine Architecture (ECS)

### ğŸ“‚ í•µì‹¬ ë””ë ‰í† ë¦¬ ë° ëª¨ë“ˆ ì—­í• 

#### 1. Engine Core (ì—”ì§„ í•µì‹¬)
-   **`engine.py`**: ê²Œì„ì˜ ë©”ì¸ ë£¨í”„ ì‹¤í–‰, `EntityManager` ì´ˆê¸°í™”, ëª¨ë“  `System`ì˜ ìˆœì„œë³„ `update()` í˜¸ì¶œ ë“± ê²Œì„ íë¦„ ì œì–´.
-   **`entity.py`**: `Entity`ì˜ ê³ ìœ  ID ìƒì„± ë° ê´€ë¦¬. `EntityManager` í´ë˜ìŠ¤ë¥¼ í¬í•¨í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ì¶”ê°€/ê²€ìƒ‰ ê¸°ëŠ¥ ì œê³µ.
-   **`component.py`**: `Entity`ì— ë¶€ì—¬ë˜ëŠ” ëª¨ë“  ìˆœìˆ˜ ë°ì´í„° í´ë˜ìŠ¤(State) ì •ì˜. (ì˜ˆ: `PositionComponent`, `HealthComponent`).
-   **`system.py`**: ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì§„ `Entity`ë¥¼ ì²˜ë¦¬í•˜ëŠ” ìˆœìˆ˜ ë¡œì§ ì •ì˜. (ì˜ˆ: `MovementSystem`, `CombatSystem`, `RenderingSystem`).

#### 2. Game Data & Definitions (ë°ì´í„° ì •ì˜)
-   **`data_manager.py`**: ì™¸ë¶€ ë°ì´í„° íŒŒì¼(`.txt`, `.json`)ì„ ì½ì–´ í…œí”Œë¦¿(Definition) ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§.
-   **`data/` (ë””ë ‰í† ë¦¬)**: ëª¨ë“  ê²Œì„ ë°ì´í„° íŒŒì¼ ì €ì¥ì†Œ. (`items.txt`, `skills.txt`, `monster_data.txt` ë“±)
-   **`data/spawn_data.txt`**: ëª¬ìŠ¤í„°ì™€ ì•„ì´í…œì˜ ìŠ¤í° ìœ„ì¹˜, í™•ë¥ , ë“œë¡­ ì•„ì´í…œì„ ê²°ì •í•˜ëŠ” ë©”íƒ€ ë°ì´í„°.

#### 3. Features & Utilities (ê¸°ëŠ¥ ë° ìœ í‹¸ë¦¬í‹°)
-   **`map.py`**: ë˜ì „ ë§µ ìƒì„± ë° ê´€ë¦¬ ë¡œì§. ì¶©ëŒ ê°ì§€, ì‹œì•¼ ê³„ì‚° ë“±ì„ ë‹´ë‹¹. (ê¸°ì¡´ `dungeon_map.py`ì—ì„œ ë³€ê²½ë¨)
-   **`ui.py`**: ì…ë ¥(Input) ì²˜ë¦¬ ë° ì¶œë ¥(Output), í„°ë¯¸ë„ ë Œë”ë§ì„ ë‹´ë‹¹í•˜ëŠ” UI ì¸í„°í˜ì´ìŠ¤. (ê¸°ì¡´ `renderer.py`ì—ì„œ ë³€ê²½ë¨)
-   **`data/UI_layout.json`**: UI ë ˆì´ì•„ì›ƒê³¼ ê´€ë ¨ëœ ì„¤ì •(ì¢Œí‘œ, í¬ê¸° ë“±)ì„ ì €ì¥í•˜ëŠ” ë°ì´í„° íŒŒì¼.

## ê°œë°œ ê°€ì´ë“œë¼ì¸

-   **ì½”ë”© ìŠ¤íƒ€ì¼**: íŒŒì´ì¬ PEP 8 í‘œì¤€ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
-   **ì˜ì¡´ì„±**: `readchar` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
-   **UI**: ëª¨ë“  UI êµ¬ì„± ìš”ì†ŒëŠ” `dungeon/ui.py`ì—ì„œ ë Œë”ë§ë©ë‹ˆë‹¤.
-   **ê²Œì„ ë°ì´í„°**: í”Œë ˆì´ì–´ ë° ë§µ ë°ì´í„°ëŠ” `game_data/` ë””ë ‰í† ë¦¬ì— JSON íŒŒì¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

## ê²Œì„ ë°ì´í„° ì •ì˜

### ìŠ¤íƒ¯ (Stats)
-   **HP (ì²´ë ¥)**: ìºë¦­í„°/ëª¬ìŠ¤í„°ì˜ ìƒëª…ë ¥.
-   **MP (ë§ˆë ¥)**: ìŠ¤í‚¬ ì‚¬ìš©ì— í•„ìš”í•œ ìì›.
-   **ATT (ê³µê²©ë ¥)**: ê³µê²© ì‹œ ìƒëŒ€ì—ê²Œ ì…íˆëŠ” ë°ë¯¸ì§€ì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤.
-   **DEF (ë°©ì–´ë ¥)**: ìƒëŒ€ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ë°›ëŠ” ë°ë¯¸ì§€ë¥¼ ê°ì†Œì‹œí‚µë‹ˆë‹¤.

### ë ˆë²¨ (LV) ë° ê²½í—˜ì¹˜ (EXP)
-   **LV (ë ˆë²¨)**: ìºë¦­í„°ì˜ ê¸°ë³¸ ìŠ¤íƒ¯ ì„±ì¥ë¥ ì„ ê²°ì •í•˜ê³ , ì•„ì´í…œ/ìŠ¤í‚¬ ì‚¬ìš© ìš”êµ¬ ì¡°ê±´ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
-   **EXP (ê²½í—˜ì¹˜)**: ëª¬ìŠ¤í„° ì²˜ì¹˜ ì‹œ íšë“í•˜ë©°, ì¼ì •ëŸ‰ ëª¨ìœ¼ë©´ ë ˆë²¨ì—…í•©ë‹ˆë‹¤.

### ëª¬ìŠ¤í„° í‘œì‹œ ë° ìƒí˜¸ì‘ìš©
-   **ë§µ í‘œì‹œ**: ëª¬ìŠ¤í„°ëŠ” `monster_data.txt`ì— ì •ì˜ëœ ê³ ìœ í•œ ASCII ì‹¬ë³¼(ì˜ˆ: ê³ ë¸”ë¦°ì€ 'g')ë¡œ ë§µì— í‘œì‹œë©ë‹ˆë‹¤.
-   **ì ‘ê·¼ ë©”ì‹œì§€**: í”Œë ˆì´ì–´ê°€ ëª¬ìŠ¤í„°ë¡œë¶€í„° 3ì¹¸ ì´ë‚´ë¡œ ì ‘ê·¼í•˜ë©´ ë©”ì‹œì§€ ë¡œê·¸ì— "[ëª¬ìŠ¤í„° ì´ë¦„](LV)ì„(ë¥¼) ë§Œë‚¬ìŠµë‹ˆë‹¤."ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

## ìµœê·¼ ë³€ê²½ ì‚¬í•­ ìš”ì•½

### 2025ë…„ 10ì›” 9ì¼ ëª©ìš”ì¼
-   **í”„ë¡œì íŠ¸ êµ¬ì¡° ì¬í¸ì„± (ECS ì•„í‚¤í…ì²˜ ê¸°ë°˜)**: ì—”ì§„ í•µì‹¬ ë¡œì§ì„ `dungeon/`ìœ¼ë¡œ, ëª¨ë“  ê²Œì„ ë°ì´í„°ë¥¼ `data/`ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤. `game.py` -> `dungeon/engine.py`, `dungeon_map.py` -> `dungeon/map_manager.py`, `ui.py` -> `dungeon/renderer.py` ë“±ìœ¼ë¡œ íŒŒì¼ ì´ë¦„ì„ ë³€ê²½í•˜ê³  ì´ë™í–ˆìŠµë‹ˆë‹¤.
-   **ê²Œì„ í”Œë ˆì´ ê·œì¹™ ë³€ê²½**: ëª¬ìŠ¤í„° ë¦¬ì   ë¡œì§ ìˆ˜ì •, ë§µ í¬ê¸° ì ì§„ì  ì¦ê°€ ë¡œì§ ë³€ê²½.
-   **ìœ ì§€ë³´ìˆ˜**: íŒŒì¼ëª… ì˜¤íƒ€ ìˆ˜ì • (`componant.py` -> `component.py`, `system.pu` -> `system.py`).

### 2025ë…„ 10ì›” 12ì¼ í† ìš”ì¼
-   **ECS ì•„í‚¤í…ì²˜ ê´€ë ¨ ë²„ê·¸ ìˆ˜ì •**: `AttributeError: 'Monster' object has no attribute 'x'`, `AttributeError: 'Monster' object has no attribute 'max_hp'`, `KeyError: None`, `NameError: name 'Player' is not defined`, `AttributeError: 'Player' object has no attribute 'max_hp'`, `AttributeError: 'Player' object has no attribute 'color'`, `UnboundLocalError: cannot access local variable 'current_dungeon_level'`, `AttributeError: 'EntityManager' object has no attribute 'has_component'` ë“± ECS ì „í™˜ ê³¼ì •ì—ì„œ ë°œìƒí•œ ë‹¤ì–‘í•œ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê³  ì•ˆì •í™”í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ, ëª¬ìŠ¤í„° ë° í”Œë ˆì´ì–´ì˜ ìŠ¤íƒ¯/ìœ„ì¹˜ ì •ë³´ê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ì˜¬ë°”ë¥´ê²Œ ê´€ë¦¬ë˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

### 2025ë…„ 11ì›” 24ì¼ ì›”ìš”ì¼
-   **UI ì…ë ¥ ê°€ì´ë“œ ê°œì„ **: `dungeon/ui.py` íŒŒì¼ì—ì„œ ë©”ì¸ ë©”ë‰´ì˜ í”Œë ˆì´ì–´ ì´ë¦„ ì…ë ¥ í”„ë¡¬í”„íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ `(Enter)` ê°€ì´ë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.
-   **ì‹¤ì‹œê°„ ì…ë ¥ ë°˜ì˜**: `dungeon/ui.py` íŒŒì¼ì˜ `render_all` í•¨ìˆ˜ ë‚´ ê²Œì„ ì¡°ì‘ ê°€ì´ë“œë¥¼ ì‹¤ì‹œê°„ í‚¤ ì…ë ¥ ë°©ì‹ì— ë§ì¶° WASD, ë°©í–¥í‚¤, HJKL, YUBN ë“± ë‹¤ì–‘í•œ ì´ë™ ì˜µì…˜ê³¼ ì¸ë²¤í† ë¦¬([I]) ë‹¨ì¶•í‚¤ë¥¼ ëª…ì‹œí•˜ë„ë¡ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤.
-   **ì—”ì§„ ì…ë ¥ ì²˜ë¦¬ í™•ì¸**: `dungeon/engine.py`ëŠ” ì´ë¯¸ `readchar` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì‹œê°„ í‚¤ ì…ë ¥ì„ ì²˜ë¦¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë³„ë„ ìˆ˜ì • ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.
-   **NameError ìˆ˜ì •**: `dungeon/system.py` íŒŒì¼ì— `DungeonMap` í´ë˜ìŠ¤ë¥¼ ì„í¬íŠ¸í•˜ì—¬ `MovementSystem` ì´ˆê¸°í™” ì‹œ `NameError`ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
-   **NameError ìˆ˜ì •**: `dungeon/system.py` íŒŒì¼ì— `Item` í´ë˜ìŠ¤ë¥¼ ì„í¬íŠ¸í•˜ì—¬ `InventorySystem` í´ë˜ìŠ¤ ë‚´ `add_item` ë©”ì„œë“œì—ì„œ `NameError`ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
-   **ì‹¤ì‹œê°„ ì…ë ¥ ì²˜ë¦¬ êµ¬í˜„**: `dungeon/system.py` íŒŒì¼ì˜ `InputSystem`ì—ì„œ `input()` ëŒ€ì‹  `readchar.readchar()`ë¥¼ ì‚¬ìš©í•˜ì—¬ Enter í‚¤ ì—†ì´ ë°”ë¡œ ì…ë ¥ì´ ì²˜ë¦¬ë˜ë„ë¡ ìˆ˜ì •í•˜ê³ , `readchar` ëª¨ë“ˆì„ ì„í¬íŠ¸í–ˆìŠµë‹ˆë‹¤.
-   **NameError ìˆ˜ì •**: `dungeon/system.py` íŒŒì¼ì— `logging` ëª¨ë“ˆì„ ì„í¬íŠ¸í•˜ì—¬ `InputSystem`ì—ì„œ `NameError`ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

## ì¼ë°˜ì ì¸ ëª…ë ¹ì–´

-   **ê²Œì„ ì‹¤í–‰**:
    ```bash
    python3 main.py
    ```
-   **ì €ì¥ ë°ì´í„° ì‚­ì œ**:
    ```bash
    rm -rf /home/dogsinatas/python_project/dungeon/game_data/*
    ```